{
	"$schema": "https://docs.renovatebot.com/renovate-schema.json",
	"extends": [
		":ignoreModulesAndTests",
		":semanticPrefixFixDepsChoreOthers",
		"docker:enableMajor",
		"docker:pinDigests",
		"group:monorepos",
		"group:recommended",
		"helpers:pinGitHubActionDigestsToSemver",
		"preview:dockerVersions",
		"replacements:all",
		"security:openssf-scorecard",
		"workarounds:all"
	],

	"configMigration": true,
	"git-submodules": { "enabled": true },
	"lockFileMaintenance": { "enabled": true },
	"prConcurrentLimit": 0,
	"pre-commit": { "enabled": true },
	"prHourlyLimit": 0,
	"recreateWhen": "always",
	"semanticCommits": "enabled",
	"separateMajorMinor": false,
	"updateInternalDeps": true,

	"packageRules": [
		{
			"matchUpdateTypes": ["major", "replacement"],
			"labels": ["version-update:semver-major"]
		},
		{
			"matchUpdateTypes": ["bump", "digest", "minor", "rollback"],
			"labels": ["version-update:semver-minor"]
		},
		{
			"matchUpdateTypes": ["lockFileMaintenance", "patch", "pin", "pinDigest"],
			"labels": ["version-update:semver-patch"]
		},

		{
			"matchDepTypes": [
				"dependencies",
				"engines",
				"extras",
				"optionalDependencies",
				"packages",
				"peerDependencies",
				"project.dependencies",
				"project.optional-dependencies",
				"volta"
			],
			"labels": ["direct:production"]
		},
		{
			"matchDepTypes": [
				"build-system.requires",
				"dependency-groups",
				"dev-dependencies",
				"dev-packages",
				"devDependencies",
				"packageManager",
				"tool.pdm.dev-dependencies",
				"tool.uv.dev-dependencies"
			],
			"labels": ["direct:development"]
		},
		{
			"matchUpdateTypes": ["lockFileMaintenance"],
			"labels": ["indirect"]
		},

		{
			"matchPackageNames": ["@redguy12/pretier-config", "prettier"],
			"groupName": "prettier config packages"
		},
		{
			"matchPackageNames": ["@discordjs/**", "discord-api-types", "discord.js"],
			"groupName": "discord.js monorepo",
			"ignoreUnstable": true
		},
		{
			"matchPackageNames": [
				"@eslint/**",
				"@redguy12/eslint**",
				"@types/eslint__**",
				"@types/eslint",
				"eslint"
			],
			"groupName": "eslint monorepo"
		},

		{
			"matchPackageNames": ["@types/**"],
			"overridePackageName": "{{{ lookup (split packageName '/') 1 }}}",
			"extractVersion": "^(?<version>v\\d+\\.\\d+)"
		},
		{
			"matchPackageNames": ["/^@types/.+__.+$/i"],
			"overridePackageName": "@{{{ replace '__' '/' (lookup (split packageName '/') 1) }}}"
		},
		{
			"matchPackageNames": ["@types/node"],
			"commitMessageTopic": "Node.js",
			"overrideDatasource": "node-version",
			"overridePackageName": "node"
		}
	]
}
